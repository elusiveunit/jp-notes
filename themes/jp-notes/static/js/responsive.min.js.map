{"version":3,"file":"responsive.min.js","sources":["../../assets/js/modules/dom.js","../../assets/js/modules/events.js","../../assets/js/responsive.js"],"sourcesContent":["export function ready(cb) {\n  if (\n    document.readyState === 'interactive' ||\n    document.readyState === 'complete'\n  ) {\n    cb();\n  } else {\n    document.addEventListener(\n      'DOMContentLoaded',\n      () => {\n        cb();\n      },\n      {\n        capture: true,\n        once: true,\n        passive: true,\n      },\n    );\n  }\n}\n\nexport function htmlToNodes(html, single = false) {\n  const template = document.createElement('template');\n  template.innerHTML = html.trim();\n  return single ? template.content.childNodes[0] : template.content.childNodes;\n}\n\nexport function nodesToHtml(nodes) {\n  return (nodes instanceof NodeList ? Array.from(nodes) : [nodes]).reduce(\n    (html, node) => `${html}${node.outerHTML}`,\n    '',\n  );\n}\n","/**\n * DOM event handling.\n *\n * Listeners receive a custom event object inspired by jQuery that has the\n * .target prop set to the event target when using delegation. It may also\n * normalize some other things.\n *\n * Additionally, a second parameter with extra data may be present if listening\n * to a custom event that has it set (would be the same data as the event's\n * `detail` property).\n */\n\nexport const NAV_EVENT = 'jpnotes-nav';\n\nclass JPNotesEvent {\n  constructor(srcEvent, target = null) {\n    this.originalEvent = srcEvent;\n\n    // Targets\n    // Custom target if passed\n    this.target =\n      target ||\n      // Target should not be a text node\n      (srcEvent.target && srcEvent.target.nodeType === 3\n        ? srcEvent.target.parentNode\n        : srcEvent.target);\n    this.currentTarget = srcEvent.currentTarget;\n    this.relatedTarget = srcEvent.relatedTarget;\n\n    // Meta data\n    // Create a timestamp if incoming event doesn't have one\n    this.timeStamp = (srcEvent && srcEvent.timeStamp) || Date.now();\n\n    const copyProps = [\n      'altKey',\n      'bubbles',\n      'button',\n      'buttons',\n      'cancelable',\n      'changedTouches',\n      'char',\n      'charCode',\n      'clientX',\n      'clientY',\n      'code',\n      'ctrlKey',\n      'detail',\n      'eventPhase',\n      'key',\n      'keyCode',\n      'metaKey',\n      'offsetX',\n      'offsetY',\n      'pageX',\n      'pageY',\n      'pointerId',\n      'pointerType',\n      'screenX',\n      'screenY',\n      'shiftKey',\n      'srcElement',\n      'targetTouches',\n      'toElement',\n      'touches',\n      'type',\n      'view',\n    ];\n    copyProps.forEach((propName) => {\n      this[propName] = srcEvent[propName];\n    });\n  }\n\n  preventDefault() {\n    this.originalEvent.preventDefault();\n  }\n\n  stopPropagation() {\n    this.originalEvent.stopPropagation();\n  }\n\n  stopImmediatePropagation() {\n    this.originalEvent.stopImmediatePropagation();\n  }\n}\n\nexport function on(el, eventName, delegate, listener) {\n  if (typeof delegate === 'function') {\n    el.addEventListener(\n      eventName,\n      (event) => {\n        delegate(\n          new JPNotesEvent(event),\n          event instanceof CustomEvent ? event.detail : undefined,\n        );\n      },\n      false,\n    );\n  } else {\n    el.addEventListener(\n      eventName,\n      (event) => {\n        let { target } = event;\n        while (target) {\n          if (target.matches(delegate)) {\n            listener(\n              new JPNotesEvent(event, target),\n              event instanceof CustomEvent ? event.detail : undefined,\n            );\n            return;\n          }\n          target =\n            target !== event.currentTarget && target !== document.body\n              ? target.parentNode\n              : null;\n        }\n      },\n      false,\n    );\n  }\n\n  return el;\n}\n\nexport function off(el, eventName, listener) {\n  el.removeEventListener(eventName, listener);\n}\n\nexport function triggerCustomEvent(eventName, extraData, target = document) {\n  target.dispatchEvent(new CustomEvent(eventName, { detail: extraData }));\n}\n\nexport function onCustomEvent(eventName, callback, target = document) {\n  on(target, eventName, callback);\n}\n","import { ready } from './modules/dom';\nimport { NAV_EVENT, on, onCustomEvent } from './modules/events';\n\nconst MENU_TOGGLE_ID = 'menu-toggle';\nconst TOGGLE_CLASS = 'menu-open';\nconst OVERLAY_CLASS = 'menu-overlay';\n\n/**\n * Various enhancements for smaller screens.\n */\nclass Responsive {\n  constructor() {\n    this.menuToggleTarget = document.body;\n\n    this.replaceMenuLinkWithToggleButton();\n    onCustomEvent(NAV_EVENT, this.closeMenu);\n  }\n\n  replaceMenuLinkWithToggleButton() {\n    const button = document.createElement('button');\n    button.appendChild(document.createTextNode('Menu'));\n    button.type = 'button';\n    button.id = MENU_TOGGLE_ID;\n\n    const link = document.getElementById(MENU_TOGGLE_ID);\n    link.parentNode.replaceChild(button, link);\n\n    const overlay = document.createElement('div');\n    overlay.className = OVERLAY_CLASS;\n    document.body.appendChild(overlay);\n\n    on(button, 'click', this.handleMenuToggle);\n    on(overlay, 'click', this.closeMenu);\n  }\n\n  closeMenu = () => {\n    this.menuToggleTarget.classList.remove(TOGGLE_CLASS);\n  };\n\n  handleMenuToggle = () => {\n    this.menuToggleTarget.classList.toggle(TOGGLE_CLASS);\n  };\n}\n\nready(() => {\n  window.RESPONSIVE = new Responsive();\n});\n"],"names":["ready","cb","document","readyState","addEventListener","capture","once","passive","NAV_EVENT","JPNotesEvent","constructor","srcEvent","target","originalEvent","nodeType","parentNode","currentTarget","relatedTarget","timeStamp","Date","now","forEach","propName","preventDefault","stopPropagation","stopImmediatePropagation","on","el","eventName","delegate","listener","event","CustomEvent","detail","matches","body","onCustomEvent","callback","MENU_TOGGLE_ID","TOGGLE_CLASS","OVERLAY_CLASS","Responsive","closeMenu","menuToggleTarget","classList","remove","handleMenuToggle","toggle","replaceMenuLinkWithToggleButton","button","createElement","appendChild","createTextNode","type","id","link","getElementById","replaceChild","overlay","className","window","RESPONSIVE"],"mappings":"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"}