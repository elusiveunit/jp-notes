{"version":3,"file":"theme-switcher.js","sources":["../../assets/js/modules/cookies.js","../../assets/js/modules/domReady.js","../../assets/js/theme-switcher.js"],"sourcesContent":["// Based on https://github.com/madmurphy/cookies.js\n\nfunction formatKey(key) {\n  return encodeURIComponent(key).replace(/[-.+*]/g, '\\\\$&');\n}\n\nexport function getCookie(key) {\n  if (!key) {\n    return null;\n  }\n  return (\n    decodeURIComponent(\n      document.cookie.replace(\n        new RegExp(\n          `(?:(?:^|.*;)\\\\s*${formatKey(key)}\\\\s*\\\\=\\\\s*([^;]*).*$)|^.*$`,\n        ),\n        '$1',\n      ),\n    ) || null\n  );\n}\n\nexport function setCookie(\n  key,\n  value,\n  end = 31536000,\n  path = '/',\n  domain = null,\n  secure = false,\n) {\n  if (!key || /^(?:expires|max-age|path|domain|secure)$/i.test(key)) {\n    return false;\n  }\n  let expires;\n  if (end) {\n    switch (end.constructor) {\n      case Number:\n        expires = end === Infinity\n          ? '; expires=Fri, 1 Jan 2038 12:00:00 GMT'\n          : `; max-age=${end}`;\n        break;\n      case String:\n        expires = `; expires=${end}`;\n        break;\n      case Date:\n        expires = `; expires=${end.toUTCString()}`;\n        break;\n      default:\n        expires = '';\n    }\n  }\n  document.cookie = `${encodeURIComponent(key)}=${encodeURIComponent(\n    value,\n  )}${expires}${domain ? `; domain=${domain}` : ''}${\n    path ? `; path=${path}` : ''\n  }${secure ? '; secure' : ''}`;\n  return true;\n}\n\nexport function hasCookie(key) {\n  if (!key || /^(?:expires|max-age|path|domain|secure)$/i.test(key)) {\n    return false;\n  }\n  return new RegExp(`(?:^|;\\\\s*)${formatKey(key)}\\\\s*\\\\=`).test(\n    document.cookie,\n  );\n}\n\nexport function removeCookie(key, path, domain) {\n  if (!hasCookie(key)) {\n    return false;\n  }\n  document.cookie = `${encodeURIComponent(\n    key,\n  )}=; expires=Thu, 01 Jan 1970 00:00:00 GMT${\n    domain ? `; domain=${domain}` : ''\n  }${path ? `; path=${path}` : ''}`;\n\n  return true;\n}\n","export default function domReady(cb) {\n  if (document.readyState === 'interactive' || document.readyState === 'complete') {\n    cb();\n  } else {\n    document.addEventListener(\n      'DOMContentLoaded',\n      () => {\n        cb();\n      },\n      {\n        capture: true,\n        once: true,\n        passive: true,\n      },\n    );\n  }\n}\n","import { getCookie, setCookie } from './modules/cookies';\nimport domReady from './modules/domReady';\n\nconst COOKIE_NAME = 'theme';\n\nclass ThemeSwitcher {\n  constructor() {\n    this.inputs = Array.from(\n      document.querySelectorAll('.theme-switcher input'),\n    );\n    this.classTarget = document.documentElement;\n\n    this.readCurrent();\n    this.bindListeners();\n  }\n\n  readCurrent() {\n    const current = getCookie(COOKIE_NAME) || 'light';\n    const currentInput = this.inputs.find((input) => input.value === current);\n    if (currentInput) {\n      currentInput.checked = true;\n    }\n  }\n\n  onInputChange = (e) => {\n    const newTheme = e.target.value;\n    this.classTarget.className = this.classTarget.className.replace(\n      /\\btheme-[a-z]+\\b/,\n      `theme-${newTheme}`,\n    );\n    setCookie(COOKIE_NAME, newTheme);\n  };\n\n  bindListeners() {\n    this.inputs.forEach((input) => {\n      input.addEventListener('change', this.onInputChange);\n    });\n  }\n}\n\ndomReady(() => {\n  window.THEME_SWITCHER = new ThemeSwitcher();\n});\n"],"names":["formatKey","key","encodeURIComponent","replace","getCookie","decodeURIComponent","document","cookie","RegExp","setCookie","value","end","path","domain","secure","test","expires","constructor","Number","String","Date","toUTCString","domReady","cb","readyState","addEventListener","capture","once","passive","COOKIE_NAME","ThemeSwitcher","onInputChange","e","newTheme","target","classTarget","className","inputs","Array","from","querySelectorAll","documentElement","readCurrent","bindListeners","current","currentInput","find","input","checked","forEach","window","THEME_SWITCHER"],"mappings":"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"}