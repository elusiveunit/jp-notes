{"version":3,"file":"theme-switcher.js","sources":["../../assets/js/modules/cookies.js","../../assets/js/modules/dom.js","../../assets/js/theme-switcher.js"],"sourcesContent":["// Based on https://github.com/madmurphy/cookies.js\n\nfunction formatKey(key) {\n  return encodeURIComponent(key).replace(/[-.+*]/g, '\\\\$&');\n}\n\nexport function getCookie(key) {\n  if (!key) {\n    return null;\n  }\n  return (\n    decodeURIComponent(\n      document.cookie.replace(\n        new RegExp(\n          `(?:(?:^|.*;)\\\\s*${formatKey(key)}\\\\s*\\\\=\\\\s*([^;]*).*$)|^.*$`,\n        ),\n        '$1',\n      ),\n    ) || null\n  );\n}\n\nexport function setCookie(\n  key,\n  value,\n  end = 31536000,\n  path = '/',\n  domain = null,\n  secure = false,\n) {\n  if (!key || /^(?:expires|max-age|path|domain|secure)$/i.test(key)) {\n    return false;\n  }\n  let expires;\n  if (end) {\n    switch (end.constructor) {\n      case Number:\n        expires = end === Infinity\n          ? '; expires=Fri, 1 Jan 2038 12:00:00 GMT'\n          : `; max-age=${end}`;\n        break;\n      case String:\n        expires = `; expires=${end}`;\n        break;\n      case Date:\n        expires = `; expires=${end.toUTCString()}`;\n        break;\n      default:\n        expires = '';\n    }\n  }\n  document.cookie = `${encodeURIComponent(key)}=${encodeURIComponent(\n    value,\n  )}${expires}${domain ? `; domain=${domain}` : ''}${\n    path ? `; path=${path}` : ''\n  }${secure ? '; secure' : ''}`;\n  return true;\n}\n\nexport function hasCookie(key) {\n  if (!key || /^(?:expires|max-age|path|domain|secure)$/i.test(key)) {\n    return false;\n  }\n  return new RegExp(`(?:^|;\\\\s*)${formatKey(key)}\\\\s*\\\\=`).test(\n    document.cookie,\n  );\n}\n\nexport function removeCookie(key, path, domain) {\n  if (!hasCookie(key)) {\n    return false;\n  }\n  document.cookie = `${encodeURIComponent(\n    key,\n  )}=; expires=Thu, 01 Jan 1970 00:00:00 GMT${\n    domain ? `; domain=${domain}` : ''\n  }${path ? `; path=${path}` : ''}`;\n\n  return true;\n}\n","export function ready(cb) {\n  if (\n    document.readyState === 'interactive' ||\n    document.readyState === 'complete'\n  ) {\n    cb();\n  } else {\n    document.addEventListener(\n      'DOMContentLoaded',\n      () => {\n        cb();\n      },\n      {\n        capture: true,\n        once: true,\n        passive: true,\n      },\n    );\n  }\n}\n\nexport function htmlToNodes(html, single = false) {\n  const template = document.createElement('template');\n  template.innerHTML = html.trim();\n  return single ? template.content.childNodes[0] : template.content.childNodes;\n}\n\nexport function nodesToHtml(nodes) {\n  return (nodes instanceof NodeList ? Array.from(nodes) : [nodes]).reduce(\n    (html, node) => `${html}${node.outerHTML}`,\n    '',\n  );\n}\n","import { getCookie, setCookie } from './modules/cookies';\nimport { ready } from './modules/dom';\n\nconst COOKIE_NAME = 'theme';\n\n/**\n * Control for switching between the site's different color schemes.\n */\nclass ThemeSwitcher {\n  constructor() {\n    this.inputs = Array.from(\n      document.querySelectorAll('.theme-switcher input'),\n    );\n    this.classTarget = document.documentElement;\n\n    this.readCurrent();\n    this.bindListeners();\n  }\n\n  readCurrent() {\n    const current = getCookie(COOKIE_NAME) || 'light';\n    const currentInput = this.inputs.find((input) => input.value === current);\n    if (currentInput) {\n      currentInput.checked = true;\n    }\n  }\n\n  onInputChange = (e) => {\n    const newTheme = e.target.value;\n    this.classTarget.className = this.classTarget.className.replace(\n      /\\btheme-[a-z]+\\b/,\n      `theme-${newTheme}`,\n    );\n    setCookie(COOKIE_NAME, newTheme);\n  };\n\n  bindListeners() {\n    this.inputs.forEach((input) => {\n      input.addEventListener('change', this.onInputChange);\n    });\n  }\n}\n\nready(() => {\n  window.THEME_SWITCHER = new ThemeSwitcher();\n});\n"],"names":["formatKey","key","encodeURIComponent","replace","getCookie","decodeURIComponent","document","cookie","RegExp","setCookie","value","end","path","domain","secure","test","expires","constructor","Number","Infinity","String","Date","toUTCString","ready","cb","readyState","addEventListener","capture","once","passive","COOKIE_NAME","ThemeSwitcher","onInputChange","e","newTheme","target","classTarget","className","inputs","Array","from","querySelectorAll","documentElement","readCurrent","bindListeners","current","currentInput","find","input","checked","forEach","window","THEME_SWITCHER"],"mappings":"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"}