(function () {
  'use strict';

  function ready(a){"interactive"===document.readyState||"complete"===document.readyState?a():document.addEventListener("DOMContentLoaded",()=>{a();},{capture:!0,once:!0,passive:!0});}

  const NAV_EVENT="jpnotes-nav";class JPNotesEvent{constructor(a,b=null){this.originalEvent=a,this.target=b||(
  a.target&&3===a.target.nodeType?a.target.parentNode:a.target),this.currentTarget=a.currentTarget,this.relatedTarget=a.relatedTarget,this.timeStamp=a&&a.timeStamp||Date.now();["altKey","bubbles","button","buttons","cancelable","changedTouches","char","charCode","clientX","clientY","code","ctrlKey","detail","eventPhase","key","keyCode","metaKey","offsetX","offsetY","pageX","pageY","pointerId","pointerType","screenX","screenY","shiftKey","srcElement","targetTouches","toElement","touches","type","view"].forEach(b=>{this[b]=a[b];});}preventDefault(){this.originalEvent.preventDefault();}stopPropagation(){this.originalEvent.stopPropagation();}stopImmediatePropagation(){this.originalEvent.stopImmediatePropagation();}}function on(a,b,c,d){return "function"==typeof c?a.addEventListener(b,a=>{c(new JPNotesEvent(a),a instanceof CustomEvent?a.detail:void 0);},!1):a.addEventListener(b,a=>{let b=a.target;for(;b;){if(b.matches(c))return void d(new JPNotesEvent(a,b),a instanceof CustomEvent?a.detail:void 0);b=b!==a.currentTarget&&b!==document.body?b.parentNode:null;}},!1),a}function triggerCustomEvent(a,b,c=document){c.dispatchEvent(new CustomEvent(a,{detail:b}));}

  const NAV_SELECTOR=".sidebar-nav",CONTENT_SELECTOR=".main-body",NAV_ACTIVE_CLASS="active",NAV_ACTIVE_SELECTOR=`.${NAV_ACTIVE_CLASS}`;
     class FastNav{constructor(){
  this.handleNavClick=a=>{a.preventDefault(),a.stopPropagation();const b=a.target.href;return this.cache[b]?void this.navigateToPage(b,this.cache[b]):void fetch(b).then(a=>a.text()).then(a=>{const c=this.parsePageToState(a);this.cache[b]=c,this.navigateToPage(b,c);}).catch(()=>{
  window.location=b;})},this.handleHistoryPopState=a=>{const b=a.state&&Object.keys(a.state).length?a.state:this.pageLoadState;this.updatePage(b);},this.cache={},this.nav=document.querySelector(NAV_SELECTOR),this.content=document.querySelector(CONTENT_SELECTOR),this.parser=new DOMParser,this.pageLoadState=this.getPageState(document.title,this.nav.querySelector(NAV_ACTIVE_SELECTOR).id,this.content.innerHTML),this.bindListeners();}getPageState(a,b,c){return {title:a,activeNavId:b,contentHTML:c}}bindListeners(){on(this.nav,"click","a",this.handleNavClick),window.onpopstate=this.handleHistoryPopState;}parsePageToState(a){const b=this.parser.parseFromString(a,"text/html"),c=b.querySelector(NAV_SELECTOR).querySelector(NAV_ACTIVE_SELECTOR),d=b.querySelector(CONTENT_SELECTOR);return this.getPageState(b.title,c.id,d.innerHTML)}updatePage(a){
  document.title=a.title,this.nav.querySelector(NAV_ACTIVE_SELECTOR).classList.remove(NAV_ACTIVE_CLASS),document.getElementById(a.activeNavId).classList.add(NAV_ACTIVE_CLASS),this.content.innerHTML=a.contentHTML;}addHistory(a,b={}){window.history.pushState(b,b.title||"",a);}navigateToPage(a,b){this.updatePage(b),this.addHistory(a,b),window.scrollTo(0,0),triggerCustomEvent(NAV_EVENT);}}ready(()=>{window.FAST_NAV=new FastNav;});

}());
//# sourceMappingURL=fast-nav.min.js.map
