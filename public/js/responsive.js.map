{"version":3,"file":"responsive.js","sources":["../../assets/js/modules/dom.js","../../assets/js/modules/events.js","../../assets/js/responsive.js"],"sourcesContent":["export function ready(cb) {\n  if (\n    document.readyState === 'interactive' ||\n    document.readyState === 'complete'\n  ) {\n    cb();\n  } else {\n    document.addEventListener(\n      'DOMContentLoaded',\n      () => {\n        cb();\n      },\n      {\n        capture: true,\n        once: true,\n        passive: true,\n      },\n    );\n  }\n}\n\nexport function htmlToNodes(html, single = false) {\n  const template = document.createElement('template');\n  template.innerHTML = html.trim();\n  return single ? template.content.childNodes[0] : template.content.childNodes;\n}\n\nexport function nodesToHtml(nodes) {\n  return (nodes instanceof NodeList ? Array.from(nodes) : [nodes]).reduce(\n    (html, node) => `${html}${node.outerHTML}`,\n    '',\n  );\n}\n","/**\n * DOM event handling.\n *\n * Listeners receive a custom event object inspired by jQuery that has the\n * .target prop set to the event target when using delegation. It may also\n * normalize some other things.\n *\n * Additionally, a second parameter with extra data may be present if listening\n * to a custom event that has it set (would be the same data as the event's\n * `detail` property).\n */\n\nexport const NAV_EVENT = 'jpnotes-nav';\n\nclass JPNotesEvent {\n  constructor(srcEvent, target = null) {\n    this.originalEvent = srcEvent;\n\n    // Targets\n    // Custom target if passed\n    this.target =\n      target ||\n      // Target should not be a text node\n      (srcEvent.target && srcEvent.target.nodeType === 3\n        ? srcEvent.target.parentNode\n        : srcEvent.target);\n    this.currentTarget = srcEvent.currentTarget;\n    this.relatedTarget = srcEvent.relatedTarget;\n\n    // Meta data\n    // Create a timestamp if incoming event doesn't have one\n    this.timeStamp = (srcEvent && srcEvent.timeStamp) || Date.now();\n\n    const copyProps = [\n      'altKey',\n      'bubbles',\n      'button',\n      'buttons',\n      'cancelable',\n      'changedTouches',\n      'char',\n      'charCode',\n      'clientX',\n      'clientY',\n      'code',\n      'ctrlKey',\n      'detail',\n      'eventPhase',\n      'key',\n      'keyCode',\n      'metaKey',\n      'offsetX',\n      'offsetY',\n      'pageX',\n      'pageY',\n      'pointerId',\n      'pointerType',\n      'screenX',\n      'screenY',\n      'shiftKey',\n      'srcElement',\n      'targetTouches',\n      'toElement',\n      'touches',\n      'type',\n      'view',\n    ];\n    copyProps.forEach((propName) => {\n      this[propName] = srcEvent[propName];\n    });\n  }\n\n  preventDefault() {\n    this.originalEvent.preventDefault();\n  }\n\n  stopPropagation() {\n    this.originalEvent.stopPropagation();\n  }\n\n  stopImmediatePropagation() {\n    this.originalEvent.stopImmediatePropagation();\n  }\n}\n\nexport function on(el, eventName, delegate, listener) {\n  if (typeof delegate === 'function') {\n    el.addEventListener(\n      eventName,\n      (event) => {\n        delegate(\n          new JPNotesEvent(event),\n          event instanceof CustomEvent ? event.detail : undefined,\n        );\n      },\n      false,\n    );\n  } else {\n    el.addEventListener(\n      eventName,\n      (event) => {\n        let { target } = event;\n        while (target) {\n          if (target.matches(delegate)) {\n            listener(\n              new JPNotesEvent(event, target),\n              event instanceof CustomEvent ? event.detail : undefined,\n            );\n            return;\n          }\n          target =\n            target !== event.currentTarget && target !== document.body\n              ? target.parentNode\n              : null;\n        }\n      },\n      false,\n    );\n  }\n\n  return el;\n}\n\nexport function off(el, eventName, listener) {\n  el.removeEventListener(eventName, listener);\n}\n\nexport function triggerCustomEvent(eventName, extraData, target = document) {\n  target.dispatchEvent(new CustomEvent(eventName, { detail: extraData }));\n}\n\nexport function onCustomEvent(eventName, callback, target = document) {\n  on(target, eventName, callback);\n}\n","import { ready } from './modules/dom';\nimport { NAV_EVENT, on, onCustomEvent } from './modules/events';\n\nconst MENU_TOGGLE_ID = 'menu-toggle';\nconst TOGGLE_CLASS = 'menu-open';\nconst OVERLAY_CLASS = 'menu-overlay';\n\n/**\n * Various enhancements for smaller screens.\n */\nclass Responsive {\n  constructor() {\n    this.menuToggleTarget = document.body;\n\n    this.replaceMenuLinkWithToggleButton();\n    onCustomEvent(NAV_EVENT, this.closeMenu);\n  }\n\n  replaceMenuLinkWithToggleButton() {\n    const button = document.createElement('button');\n    button.appendChild(document.createTextNode('Menu'));\n    button.type = 'button';\n    button.id = MENU_TOGGLE_ID;\n\n    const link = document.getElementById(MENU_TOGGLE_ID);\n    link.parentNode.replaceChild(button, link);\n\n    const overlay = document.createElement('div');\n    overlay.className = OVERLAY_CLASS;\n    document.body.appendChild(overlay);\n\n    on(button, 'click', this.handleMenuToggle);\n    on(overlay, 'click', this.closeMenu);\n  }\n\n  closeMenu = () => {\n    this.menuToggleTarget.classList.remove(TOGGLE_CLASS);\n  };\n\n  handleMenuToggle = () => {\n    this.menuToggleTarget.classList.toggle(TOGGLE_CLASS);\n  };\n}\n\nready(() => {\n  window.RESPONSIVE = new Responsive();\n});\n"],"names":["ready","cb","document","readyState","addEventListener","capture","once","passive","NAV_EVENT","JPNotesEvent","constructor","srcEvent","target","originalEvent","nodeType","parentNode","currentTarget","relatedTarget","timeStamp","Date","now","copyProps","forEach","propName","preventDefault","stopPropagation","stopImmediatePropagation","on","el","eventName","delegate","listener","event","CustomEvent","detail","undefined","matches","body","onCustomEvent","callback","MENU_TOGGLE_ID","TOGGLE_CLASS","OVERLAY_CLASS","Responsive","closeMenu","menuToggleTarget","classList","remove","handleMenuToggle","toggle","replaceMenuLinkWithToggleButton","button","createElement","appendChild","createTextNode","type","id","link","getElementById","replaceChild","overlay","className","window","RESPONSIVE"],"mappings":"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"}